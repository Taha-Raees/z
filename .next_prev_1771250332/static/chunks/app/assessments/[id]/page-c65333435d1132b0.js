(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{4186:(e,s,n)=>{Promise.resolve().then(n.t.bind(n,2619,23)),Promise.resolve().then(n.bind(n,9651)),Promise.resolve().then(n.bind(n,7539)),Promise.resolve().then(n.bind(n,814)),Promise.resolve().then(n.bind(n,6294)),Promise.resolve().then(n.bind(n,7091)),Promise.resolve().then(n.bind(n,7777)),Promise.resolve().then(n.bind(n,3406))},9439:(e,s,n)=>{"use strict";n.d(s,{M:()=>r,k:()=>i});var t=n(9893);async function r(e){return(0,t.n)("/api/exercises/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function i(e){return(0,t.n)("/api/assessments/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},9651:(e,s,n)=>{"use strict";n.d(s,{AssessmentRunner:()=>o});var t=n(5155),r=n(2115),i=n(5261),a=n(9439);function l(e){return(e||"").toLowerCase()}function o(e){let{assessmentId:s,questions:n}=e,[o,d]=(0,r.useState)(!1),[u,c]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[b,g]=(0,r.useState)(()=>n.map(e=>{let s=l(e.type);return"mcq"===s||"true_false"===s?null:""})),f=(0,r.useMemo)(()=>0!==n.length&&b.every((e,s)=>{var t;let r=l(null==(t=n[s])?void 0:t.type);return"mcq"===r||"true_false"===r?null!==e:"string"==typeof e?e.trim().length>0:!!e}),[b,n]),y=async()=>{c(!0),p(null);try{let e=await (0,a.k)({assessmentId:s,answers:b});h(e)}catch(e){p(e instanceof Error?e.message:"Submission failed")}finally{c(!1)}};return(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between gap-2",children:[(0,t.jsx)(i.ZB,{className:"text-sm",children:"Assessment runner"}),o?(0,t.jsx)(i.Ex,{variant:"warn",children:"In progress"}):(0,t.jsx)(i.$n,{onClick:()=>{d(!0),h(null),p(null)},size:"sm",children:"Start attempt"})]}),(0,t.jsx)(i.Wu,{children:o?(0,t.jsxs)("div",{className:"space-y-3",children:[n.map((e,n)=>(0,t.jsx)(i._d,{id:"".concat(s,"-q-").concat(n),index:n,type:e.type,prompt:e.question||e.prompt||"Question text unavailable",options:e.options,value:b[n],onChange:e=>{g(s=>{let t=[...s];return t[n]=e,t})}},"".concat(s,"-runner-").concat(n))),(0,t.jsx)(i.$n,{onClick:y,disabled:!f||u,size:"sm",children:u?"Submitting...":"Submit assessment"}),m?(0,t.jsx)("p",{className:"rounded-lg border border-danger/20 bg-danger/10 px-2 py-1 text-xs text-danger",children:m}):null,x?(0,t.jsxs)("p",{className:"rounded-lg border border-success/20 bg-success/10 px-2 py-1 text-xs text-success",children:["Score: ",Math.round(x.grading.score),"% â€¢ ",x.grading.passed?"Passed":"Needs review"]}):null,(null==x?void 0:x.grading.feedback)?(0,t.jsx)("p",{className:"rounded-lg border border-info/20 bg-info/10 px-2 py-1 text-xs text-info",children:x.grading.feedback}):null]}):(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start the room to answer all questions and submit for grading."})})]})}}},e=>{e.O(0,[619,16,434,441,255,358],()=>e(e.s=4186)),_N_E=e.O()}]);