(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{2742:(e,t,s)=>{Promise.resolve().then(s.bind(s,5574))},5574:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var r=s(5155),a=s(2115),n=s(2619),l=s.n(n),o=s(1847);let i=(0,o.A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),d=(0,o.A)("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]),u=(0,o.A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);var c=s(5299),m=s(5740);let p=(0,o.A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),x=(0,o.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var g=s(9051),h=s(5261),f=s(5752),b=s(9893);async function y(e){return(0,b.n)("/api/programs/generate/status/".concat(e))}async function j(){return(0,b.n)("/api/admissions/start",{method:"POST"})}async function v(e){return(0,b.n)("/api/admissions/answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function N(e){return(0,b.n)("/api/programs/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e})})}async function w(e){return(0,b.n)("/api/programs/generate/retry/".concat(e),{method:"POST"})}async function I(e){return(0,b.n)("/api/programs/generate/recover/".concat(e),{method:"POST"})}let S="aiedu.activeBuildJob.v1",E={PENDING:"bg-gray-100 text-gray-700",IN_PROGRESS:"bg-blue-100 text-blue-700",COMPLETED:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700"};function k(e){return Number.isFinite(e)?Math.min(100,Math.max(0,e)):0}function R(){var e;let[t,s]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[b,R]=(0,a.useState)(""),[D,O]=(0,a.useState)(!1),[M,P]=(0,a.useState)(null),[L,A]=(0,a.useState)(!1),[T,U]=(0,a.useState)(null),[W,F]=(0,a.useState)(null),[q,G]=(0,a.useState)(0),[Q,_]=(0,a.useState)(!1),[B,Z]=(0,a.useState)([]),[z,J]=(0,a.useState)(null),[$,V]=(0,a.useState)(null),[K,Y]=(0,a.useState)(null),[H,X]=(0,a.useState)(!1),ee=(0,a.useRef)(null),et=(0,a.useRef)(!1),es=(0,a.useCallback)(e=>{Z(t=>{var s,r;let a=t[t.length-1];return a&&a.step===e.step&&a.status===e.status&&(null!=(s=a.message)?s:"")===(null!=(r=e.message)?r:"")?t:[...t,e].slice(-300)})},[]),er=(0,a.useMemo)(()=>$?$.totalLessons>0?k($.completedLessons/$.totalLessons*100):$.totalModules>0?k($.completedModules/$.totalModules*100):100*("COMPLETED"===$.status):0,[$]),ea=(0,a.useMemo)(()=>K?K.modules.reduce((e,t)=>e+t.lessons.filter(e=>"COMPLETED"===e.buildStatus).length,0):0,[K]),en=!!T||B.length>0||!!z||!!K||!!$,el=z||(null==$?void 0:$.status)==="FAILED"?"error":(null==$?void 0:$.isWorking)&&ea>0?"partial-ready":Q||(null==$?void 0:$.isWorking)?"running":t&&D?"ready":"needs-input",eo=(0,a.useCallback)(()=>{try{localStorage.removeItem(S)}catch(e){}},[]);(0,a.useEffect)(()=>{if(!T)return;let e={jobId:T,programId:W,lastEventIndex:q,updatedAt:new Date().toISOString()};try{localStorage.setItem(S,JSON.stringify(e))}catch(e){}},[T,W,q]);let ei=(0,a.useCallback)(e=>{var t,s,r,a,n,l,o,i;let d="string"==typeof e.jobId?e.jobId:T,u="string"==typeof e.programId?e.programId:W,c="string"==typeof e.status?e.status:null!=(t=null==$?void 0:$.status)?t:"QUEUED",m="string"==typeof e.currentPhase?e.currentPhase:null,p="string"==typeof e.currentItem?e.currentItem:null,x="number"==typeof e.totalModules?e.totalModules:null!=(s=null==$?void 0:$.totalModules)?s:0,g="number"==typeof e.completedModules?e.completedModules:null!=(r=null==$?void 0:$.completedModules)?r:0,h="number"==typeof e.totalLessons?e.totalLessons:null!=(a=null==$?void 0:$.totalLessons)?a:0,f="number"==typeof e.completedLessons?e.completedLessons:null!=(n=null==$?void 0:$.completedLessons)?n:0,b="number"==typeof e.retryCount?e.retryCount:null!=(l=null==$?void 0:$.retryCount)?l:0,y="number"==typeof e.maxRetries?e.maxRetries:null!=(o=null==$?void 0:$.maxRetries)?o:2;V({jobId:null!=d?d:"",programId:null!=u?u:null,status:c,currentPhase:m,currentItem:p,totalModules:x,completedModules:g,totalLessons:h,completedLessons:f,retryCount:b,maxRetries:y,error:"string"==typeof e.error?e.error:null,lastEventIndex:"number"==typeof e.lastEventIndex?Math.max(q,e.lastEventIndex):q,isWorking:!!(null!=(i=e.isWorking)?i:"QUEUED"===c||"RUNNING"===c)}),d&&U(d),u&&F(u),"number"==typeof e.lastEventIndex&&G(t=>Math.max(t,e.lastEventIndex))},[T,$,q,W]),ed=(0,a.useCallback)(async(e,t)=>{var s;null==(s=ee.current)||s.abort();let r=new AbortController;ee.current=r,_(!0);try{let s=await fetch("/api/programs/generate/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:e,afterIndex:t}),signal:r.signal});if(!s.ok||!s.body)throw Error("Failed to open generation stream");let a=s.body.getReader(),n=new TextDecoder,l="",o=e=>{let t=e.split("\n").map(e=>e.trimEnd()).filter(Boolean);if(0===t.length)return;let s="message",r=[];for(let e of t)e.startsWith("event:")&&(s=e.slice(6).trim()),e.startsWith("data:")&&r.push(e.slice(5).trim());let a=r.join("\n"),n={};try{n=a?JSON.parse(a):{}}catch(e){n={}}if("status"===s){ei(n),es({step:"string"==typeof n.currentPhase?n.currentPhase:"Status",status:n.isWorking?"in_progress":"completed",message:"string"==typeof n.currentItem?"Working on: ".concat(n.currentItem):"string"==typeof n.status?"Job status: ".concat(n.status):"Status updated",timestamp:new Date().toISOString()});return}if("progress"===s){let e="number"==typeof n.index?n.index:void 0;"number"==typeof e&&G(t=>Math.max(t,e)),es({index:e,type:"string"==typeof n.type?n.type:void 0,step:"string"==typeof n.step?n.step:"Progress",status:"failed"===n.status?"failed":"completed"===n.status?"completed":"pending"===n.status?"pending":"in_progress",level:"string"==typeof n.level?n.level:void 0,message:"string"==typeof n.message?n.message:void 0,timestamp:"string"==typeof n.timestamp?n.timestamp:new Date().toISOString()});return}if("partial"===s){let e=n.program;e&&Y(e),"string"==typeof n.programId&&F(n.programId),"number"==typeof n.lastEventIndex&&G(e=>Math.max(e,n.lastEventIndex));return}if("error"===s){let e="string"==typeof n.error?n.error:"Program generation encountered an error";J(e),es({step:"Error",status:"failed",message:e,timestamp:new Date().toISOString()}),"string"==typeof n.status&&ei({...n,isWorking:!1});return}if("complete"===s){let e="string"==typeof n.programId?n.programId:W;e&&F(e),eo(),_(!1),J(null),es({step:"Generation complete",status:"completed",message:"Program generation completed. Redirecting to program overview...",timestamp:new Date().toISOString()}),!et.current&&e&&(et.current=!0,setTimeout(()=>{window.location.href="/programs/".concat(e)},800));return}if("done"===s){let e="string"==typeof n.status?n.status:null;e&&ei({status:e,isWorking:"QUEUED"===e||"RUNNING"===e,lastEventIndex:"number"==typeof n.lastEventIndex?n.lastEventIndex:q}),"COMPLETED"===e&&eo(),_(!1);return}};for(;;){let{done:e,value:t}=await a.read();if(e)break;for(l+=n.decode(t,{stream:!0});;){let e=l.indexOf("\n\n");if(-1===e)break;let t=l.slice(0,e);l=l.slice(e+2),o(t)}}}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;let e=t instanceof Error?t.message:"Stream connection failed";J(e),_(!1),es({step:"Stream Error",status:"failed",message:e,timestamp:new Date().toISOString()})}finally{ee.current===r&&(ee.current=null)}},[es,eo,q,W,ei]);(0,a.useEffect)(()=>{let e=!0;return(async()=>{try{var t,s,r,a;let n=localStorage.getItem(S);if(!n)return;let l=JSON.parse(n);if(!(null==l?void 0:l.jobId)||!e)return;X(!0),U(l.jobId),F(null!=(s=l.programId)?s:null),G(null!=(r=l.lastEventIndex)?r:0),es({step:"Reconnect",status:"in_progress",message:"Resuming background generation job ".concat(l.jobId.slice(-6),"..."),timestamp:new Date().toISOString()});let o=await y(l.jobId);if(!e)return;o.job&&ei({...o.job,isWorking:"QUEUED"===o.job.status||"RUNNING"===o.job.status}),o.program&&Y(o.program);let i="string"==typeof(null==(t=o.job)?void 0:t.status)?o.job.status:null;("QUEUED"===i||"RUNNING"===i)&&await ed(l.jobId,null!=(a=l.lastEventIndex)?a:0),"COMPLETED"===i&&eo()}catch(e){eo()}finally{e&&X(!1)}})(),()=>{var t;e=!1,null==(t=ee.current)||t.abort()}},[es,eo,ed,ei]);let eu=async()=>{if(n&&b.trim()){A(!0);try{let e=await v({sessionId:t,questionKey:n.questionKey,answer:b});e.isComplete?(O(!0),P(e.profile)):e.nextQuestion&&(o(e.nextQuestion),R(""))}catch(e){J(e instanceof Error?e.message:"Failed to submit answer")}finally{A(!1)}}},ec=async()=>{A(!0);try{let e=await j();s(e.sessionId),o(e.currentQuestion),J(null)}catch(e){J(e instanceof Error?e.message:"Failed to start admissions")}finally{A(!1)}},em=async()=>{if(M){J(null),Y(null),Z([]),_(!0),es({step:"Queue",status:"in_progress",message:"Submitting program generation request...",timestamp:new Date().toISOString()});try{var e,t,s;let r=await N(M);if(!r.jobId)throw Error(r.error||"Failed to queue program generation");U(r.jobId),F(null!=(e=r.programId)?e:null),G(0),V({jobId:r.jobId,programId:null!=(t=r.programId)?t:null,status:null!=(s=r.status)?s:"QUEUED",currentPhase:"queued",currentItem:null,totalModules:0,completedModules:0,totalLessons:0,completedLessons:0,retryCount:0,maxRetries:2,error:null,lastEventIndex:0,isWorking:!0}),es({step:"Queue",status:"completed",message:r.reused?"Reusing active background job ".concat(r.jobId.slice(-6),"."):"Background job ".concat(r.jobId.slice(-6)," queued successfully."),timestamp:new Date().toISOString()}),await ed(r.jobId,0)}catch(t){let e=t instanceof Error?t.message:"Failed to generate program";J(e),_(!1),es({step:"Queue",status:"failed",message:e,timestamp:new Date().toISOString()})}}},ep=async()=>{if(T){J(null),_(!0),es({step:"Resume",status:"in_progress",message:"Requesting resume for background job...",timestamp:new Date().toISOString()});try{let e=await w(T);V(t=>{var s,r;return t?{...t,status:"QUEUED",isWorking:!0,retryCount:null!=(s=e.retryCount)?s:t.retryCount,maxRetries:null!=(r=e.maxRetries)?r:t.maxRetries,error:null,currentPhase:"queued",currentItem:null}:t}),es({step:"Resume",status:"completed",message:e.resumeFrom?"Resuming from: ".concat(e.resumeFrom):"Resume queued. Reconnecting to background stream...",timestamp:new Date().toISOString()}),await ed(T,q)}catch(t){let e=t instanceof Error?t.message:"Resume failed";J(e),_(!1),es({step:"Resume",status:"failed",message:e,timestamp:new Date().toISOString()})}}},ex=async()=>{if(T){J(null),_(!0),es({step:"Recover",status:"in_progress",message:"Attempting to recover stuck job...",timestamp:new Date().toISOString()});try{let e=await I(T);V(e=>e?{...e,status:"QUEUED",isWorking:!0,error:null,currentPhase:"queued",currentItem:null}:e),es({step:"Recover",status:"completed",message:e.resumeFrom?"Recovered. Resuming from: ".concat(e.resumeFrom):"Recovery complete. Reconnecting to background stream...",timestamp:new Date().toISOString()}),await ed(T,q)}catch(t){let e=t instanceof Error?t.message:"Recovery failed";J(e),_(!1),es({step:"Recover",status:"failed",message:e,timestamp:new Date().toISOString()})}}},eg=()=>{if(!en)return null;let e=Q||(null==$?void 0:$.isWorking),t=H?"Reconnecting":(null==$?void 0:$.status)?"Job ".concat($.status):e?"Running":"Idle",s=function(e){var t;let s=null!=(t=null==e?void 0:e.toUpperCase())?t:"UNKNOWN";return"COMPLETED"===s?{label:"Completed",tone:"success"}:"RUNNING"===s?{label:"Running",tone:"warn"}:"QUEUED"===s?{label:"Queued",tone:"info"}:"FAILED"===s?{label:"Failed",tone:"danger"}:"CANCELED"===s?{label:"Canceled",tone:"muted"}:{label:"Pending",tone:"muted"}}(null==$?void 0:$.status);return(0,r.jsxs)(h.Zp,{className:"mt-6",children:[(0,r.jsxs)(h.aR,{className:"flex flex-row items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.ZB,{className:"font-display text-lg",children:"Program Build Pipeline"}),(0,r.jsx)(h.BT,{children:"Live queue, progress timeline, partial lesson availability, and reconnect-safe state."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,r.jsx)(i,{className:e?"status-pulse h-3.5 w-3.5 text-blue-500":(null==$?void 0:$.status)==="COMPLETED"?"h-3.5 w-3.5 text-green-500":(null==$?void 0:$.status)==="FAILED"?"h-3.5 w-3.5 text-red-500":"h-3.5 w-3.5 text-muted-foreground",fill:"currentColor"}),(0,r.jsx)(h.Ex,{variant:s.tone,children:t}),T?(0,r.jsx)("span",{className:"rounded bg-muted px-2 py-0.5 font-mono text-[11px] text-muted-foreground",children:T.slice(-8)}):null]})]}),(0,r.jsxs)(h.Wu,{className:"space-y-4",children:[$?(0,r.jsxs)("div",{className:"surface-muted p-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{className:"rounded bg-background px-2 py-1",children:["Phase: ",$.currentPhase||"queued"]}),(0,r.jsxs)("span",{className:"rounded bg-background px-2 py-1",children:["Item: ",$.currentItem||"â€”"]}),(0,r.jsxs)("span",{className:"rounded bg-background px-2 py-1",children:["Retries: ",$.retryCount,"/",$.maxRetries]}),$.programId?(0,r.jsx)(l(),{href:"/programs/".concat($.programId),className:"rounded bg-primary px-2 py-1 font-semibold text-primary-foreground",children:"Open Program"}):null]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center justify-between text-[11px] text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Lessons ",$.completedLessons,"/",Math.max($.totalLessons,0)]}),(0,r.jsxs)("span",{children:[Math.round(er),"%"]})]}),(0,r.jsx)("div",{className:"h-1.5 rounded-full bg-muted",children:(0,r.jsx)("div",{className:"h-1.5 rounded-full bg-primary transition-all",style:{width:"".concat(Math.round(er),"%")}})})]})]}):null,(0,r.jsxs)("div",{className:"grid gap-4 xl:grid-cols-2",children:[(0,r.jsxs)("div",{className:"surface-muted p-3",children:[(0,r.jsx)("h4",{className:"font-display text-sm font-semibold text-foreground",children:"Build Timeline"}),(0,r.jsxs)("div",{className:"mt-2 max-h-64 space-y-2 overflow-auto rounded-lg border border-border/70 bg-background p-2",children:[0===B.length?(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Waiting for background events..."}):null,B.map((e,t)=>{var s;return(0,r.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,r.jsx)("span",{className:"completed"===e.status?"mt-1 inline-block h-2 w-2 rounded-full bg-green-500":"failed"===e.status?"mt-1 inline-block h-2 w-2 rounded-full bg-red-500":"in_progress"===e.status?"status-pulse mt-1 inline-block h-2 w-2 rounded-full bg-blue-500":"mt-1 inline-block h-2 w-2 rounded-full bg-gray-400"}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"truncate font-semibold text-foreground",children:e.step}),e.message?(0,r.jsx)("p",{className:"text-muted-foreground",children:e.message}):null,e.timestamp?(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()}):null]})]},"".concat(null!=(s=e.index)?s:t,"-").concat(e.step,"-").concat(t))})]})]}),(0,r.jsxs)("div",{className:"surface-muted p-3",children:[(0,r.jsx)("h4",{className:"font-display text-sm font-semibold text-foreground",children:"Partial Lesson Availability"}),K?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground",children:["Ready lessons: ",(0,r.jsx)("span",{className:"font-semibold text-foreground",children:ea})]}),(0,r.jsx)("div",{className:"mt-2 max-h-64 space-y-2 overflow-auto",children:K.modules.map(e=>(0,r.jsxs)("div",{className:"rounded-lg border border-border/70 bg-background p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("p",{className:"text-xs font-semibold text-foreground",children:["Module ",e.index+1,": ",e.title]}),(0,r.jsx)("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold ".concat(E[e.buildStatus]||E.PENDING),children:e.buildStatus.replace("_"," ")})]}),(0,r.jsx)("div",{className:"mt-2 space-y-1",children:e.lessons.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded bg-muted/40 px-2 py-1",children:[(0,r.jsxs)("p",{className:"truncate text-[11px] text-foreground/90",children:["L",e.index+1,": ",e.title]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-medium ".concat(E[e.buildStatus]||E.PENDING),children:e.buildStatus.replace("_"," ")}),"COMPLETED"===e.buildStatus?(0,r.jsx)(l(),{href:"/lessons/".concat(e.id),className:"text-[10px] font-semibold text-primary hover:underline",children:"Open"}):null]})]},e.id))})]},e.id))})]}):(0,r.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"Modules and lessons will appear as each chunk completes."})]})]}),z?(0,r.jsx)("p",{className:"rounded-lg border border-red-200 bg-red-50 p-2 text-xs font-medium text-red-700",children:z}):null,(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null==$?void 0:$.status)==="FAILED"&&T&&$.retryCount<$.maxRetries?(0,r.jsxs)(h.$n,{onClick:ep,disabled:Q,size:"sm",children:["Resume build (",$.retryCount,"/",$.maxRetries,")"]}):null,(null==$?void 0:$.status)==="RUNNING"&&T&&!$.isWorking?(0,r.jsx)(h.$n,{onClick:ex,disabled:Q,size:"sm",variant:"secondary",children:"Recover stuck build"}):null]})]})]})};return D&&M?(0,r.jsx)(h.GV,{nav:f.FA,currentPath:"/admissions",status:el,children:(0,r.jsxs)("div",{className:"mx-auto max-w-6xl space-y-6",children:[(0,r.jsx)(h.zY,{title:"Admissions Summary",subtitle:"Your profile is complete. Launch a generation pipeline and monitor progress without leaving this screen.",actions:(0,r.jsx)(h.Ex,{variant:"success",children:"Profile ready"})}),(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,r.jsxs)(h.Zp,{className:"lg:col-span-2",children:[(0,r.jsx)(h.aR,{children:(0,r.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(d,{className:"h-4 w-4"}),"Student Profile Snapshot"]})}),(0,r.jsxs)(h.Wu,{className:"grid gap-3 sm:grid-cols-2",children:[(0,r.jsx)(C,{label:"Topic",value:M.topic}),(0,r.jsx)(C,{label:"Current Level",value:M.currentLevel}),(0,r.jsx)(C,{label:"Goal Level",value:M.goalLevel}),(0,r.jsx)(C,{label:"Target Date",value:M.targetDate}),(0,r.jsx)(C,{label:"Hours per Day",value:"".concat(M.hoursPerDay," hours")}),(0,r.jsx)(C,{label:"Pace",value:M.pacePreference})]})]}),(0,r.jsxs)(h.Zp,{children:[(0,r.jsx)(h.aR,{children:(0,r.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(u,{className:"h-4 w-4"}),"Next Actions"]})}),(0,r.jsxs)(h.Wu,{className:"space-y-2",children:[(0,r.jsxs)(h.$n,{onClick:em,disabled:L||Q,className:"w-full",children:[Q?(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),Q?"Generating program...":"Generate my program"]}),(0,r.jsx)(l(),{href:"/dashboard",className:"btn-secondary w-full",children:"Open dashboard"})]})]})]}),eg()]})}):t?(0,r.jsx)(h.GV,{nav:f.FA,currentPath:"/admissions",status:el,children:(0,r.jsxs)("div",{className:"mx-auto max-w-6xl space-y-6",children:[(0,r.jsx)(h.zY,{title:"Admissions Interview",subtitle:"One question at a time. Better input creates a stronger generated program.",actions:(0,r.jsxs)(h.Ex,{variant:"muted",children:["Question ",(null==n?void 0:n.questionNumber)||1]})}),(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,r.jsx)(h.Zp,{className:"lg:col-span-2",children:(0,r.jsxs)(h.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"mb-2 flex justify-between text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:"Interview progress"}),(0,r.jsxs)("span",{children:[Math.round(100*((null==n?void 0:n.progress)||0)),"%"]})]}),(0,r.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,r.jsx)("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:"".concat(100*((null==n?void 0:n.progress)||0),"%")}})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-semibold text-foreground",children:null==n?void 0:n.question}),(null==n?void 0:n.rationale)?(0,r.jsx)("p",{className:"mt-3 rounded-xl border border-border/70 bg-muted/30 p-3 text-sm text-muted-foreground",children:n.rationale}):null]}),(0,r.jsx)("div",{className:"mb-8",children:(null==n?void 0:n.type)==="select"?(0,r.jsx)("div",{className:"space-y-2",children:null==(e=n.options)?void 0:e.map((e,t)=>(0,r.jsx)("button",{onClick:()=>R(e),className:"w-full rounded-xl border px-4 py-3 text-left text-sm transition ".concat(b===e?"border-primary/50 bg-primary/10":"border-border hover:bg-muted/40"),children:e},"".concat(e,"-").concat(t)))}):(0,r.jsx)(h.TM,{value:b,onChange:e=>R(e.target.value),placeholder:"Type your answer here...",className:"w-full resize-none",rows:4})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)(h.$n,{onClick:eu,disabled:!b.trim()||L,className:"min-w-[180px]",children:[L?(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,L?"Submitting...":"Continue",L?null:(0,r.jsx)(x,{className:"ml-2 h-4 w-4"})]}),(0,r.jsx)(l(),{href:"/",className:"btn-secondary",children:"Cancel"})]})]})}),(0,r.jsxs)(h.Zp,{children:[(0,r.jsx)(h.aR,{children:(0,r.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Interview Guidance"]})}),(0,r.jsxs)(h.Wu,{className:"space-y-2 text-sm text-muted-foreground",children:[(0,r.jsx)("p",{children:"Be specific about target outcomes and timeline realism."}),(0,r.jsx)("p",{children:"Language preferences here directly affect generated learner content."}),(0,r.jsx)("p",{children:"After completion, launch the build pipeline and monitor progress live."})]})]})]}),eg()]})}):(0,r.jsx)(h.GV,{nav:f.FA,currentPath:"/admissions",status:el,children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[(0,r.jsxs)(h.Zp,{className:"text-center",children:[(0,r.jsxs)(h.aR,{className:"items-center",children:[(0,r.jsx)("div",{className:"mb-1 inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-primary/10 text-primary",children:(0,r.jsx)(p,{className:"h-6 w-6"})}),(0,r.jsx)(h.ZB,{className:"font-display text-2xl",children:"Start Admissions"}),(0,r.jsx)(h.BT,{className:"max-w-xl",children:"Complete a guided interview to define goals, language policy, and pace before starting the build pipeline."})]}),(0,r.jsx)(h.Wu,{className:"mx-auto w-full max-w-sm",children:(0,r.jsxs)(h.$n,{onClick:ec,disabled:L,className:"w-full",children:[L?(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(x,{className:"mr-2 h-4 w-4"}),L?"Starting...":"Start interview"]})})]}),eg()]})})}function C(e){let{label:t,value:s}=e;return(0,r.jsxs)("div",{className:"rounded-xl border border-border/70 bg-muted/25 p-3",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-muted-foreground",children:t}),(0,r.jsx)("p",{className:"mt-1 text-sm font-semibold text-foreground",children:s})]})}}},e=>{e.O(0,[619,16,434,441,255,358],()=>e(e.s=2742)),_N_E=e.O()}]);